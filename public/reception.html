<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reception - MedFlow Pro</title>
  <link rel="stylesheet" href="css/styles.css">
</head>

<body>

  <!-- Header -->
  <header class="site-header">
    <div class="container">
      <div class="brand">
        <span>MedFlow</span> Pro
      </div>
      <nav class="main-nav">
        <a href="reception.html" class="active">Reception</a>
        <a href="doctor.html">Doctor</a>
        <a href="pharmacy.html">Pharmacy</a> <a href="lab.html">Lab</a>
      </nav>
      <div style="font-weight: 500; color: var(--text-muted);">
        Reception Desk
      </div>
    </div>
  </header>

  <div class="container">
    <div class="dashboard-grid">

      <!-- Left Column: Registration -->
      <div class="card">
        <h3>New Patient Registration</h3>
        <p style="font-size: 0.9rem; margin-bottom: 20px;">Enter patient details to generate a token.</p>

        <form id="regForm">
          <div class="form-group">
            <label>Full Name</label>
            <input type="text" id="name" placeholder="e.g. John Doe" required>
          </div>

          <div class="flex gap-2 form-group">
            <div style="flex: 1;">
              <label>Age</label>
              <input type="number" id="age" placeholder="Age" required>
            </div>
            <div style="flex: 1;">
              <label>Gender</label>
              <select id="gender">
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label>Phone Number</label>
            <input type="tel" id="phone" placeholder="10-digit mobile number" required>
          </div>

          <div class="form-group">
            <label>Address</label>
            <textarea id="address" rows="2" placeholder="Patient address"></textarea>
          </div>

          <div class="flex gap-2 form-group">
            <div style="flex: 1;">
              <label>Patient Type</label>
              <select id="patientType">
                <option value="New">New</option>
                <option value="Follow-up">Follow-up</option>
                <option value="Emergency">Emergency</option>
              </select>
            </div>
            <div style="flex: 1;">
              <label>OPD/IPD</label>
              <select id="opdipd">
                <option value="OPD">OPD</option>
                <option value="IPD">IPD</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label>Department</label>
            <select id="department">
              <!-- Loaded by JS -->
            </select>
          </div>

          <div class="form-group">
            <label>Assign Doctor</label>
            <select id="doctor">
              <option value="">(Auto Assign)</option>
            </select>
          </div>

          <div class="form-group">
            <label>Purpose of Visit</label>
            <textarea id="reason" rows="2" placeholder="Brief symptoms or reason..."></textarea>
          </div>

          <div class="form-group">
            <label>Consultation Fee (â‚¹)</label>
            <input type="number" id="cost" value="500">
          </div>

          <div class="form-group">
            <label>Upload Reports (Optional)</label>
            <div class="file-upload-wrapper">
              <label for="reports" class="file-upload-label">
                <span id="fileLabelText">Click to upload files (Images/PDF)</span>
              </label>
              <input type="file" id="reports" class="file-upload-input" multiple accept="image/*,application/pdf">
            </div>
          </div>

          <div id="status" class="mb-4" style="font-weight: 600; min-height: 24px;"></div>

          <div class="flex gap-2">
            <button type="submit" class="btn btn-primary" style="flex: 1;">Register Patient</button>
            <button type="button" class="btn btn-secondary"
              onclick="document.getElementById('regForm').reset()">Clear</button>
          </div>
        </form>
      </div>

      <!-- Right Column: Dashboard & Queue -->
      <div>

        <!-- Stats Widgets -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">Today's Patients</div>
            <div class="stat-value" id="stat-total">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Waiting</div>
            <div class="stat-value" id="stat-waiting" style="color: var(--status-waiting);">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">With Doctor</div>
            <div class="stat-value" id="stat-doctor" style="color: var(--status-doctor);">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Completed</div>
            <div class="stat-value" id="stat-completed" style="color: var(--status-completed);">0</div>
          </div>
        </div>

        <!-- Patient Queue -->
        <div class="card">
          <div class="flex justify-between items-center mb-4">
            <h3>Patient Queue</h3>
            <div class="flex gap-2">
              <button id="exportMonth" class="btn btn-sm btn-secondary">Export Monthly</button>
              <button id="exportYear" class="btn btn-sm btn-secondary">Export Yearly</button>
            </div>
          </div>

          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Token</th>
                  <th>Patient Name</th>
                  <th>Age/Gender</th>
                  <th>Department</th>
                  <th>Doctor</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="patients-table-body">
                <!-- Rows injected by JS -->
              </tbody>
            </table>
          </div>
          <div id="empty-state" style="text-align: center; padding: 40px; color: var(--text-muted); display: none;">
            No patients in the queue today.
          </div>
        </div>

        <!-- Pagination Controls -->
        <div class="flex justify-between items-center mt-4" id="pagination-controls" style="padding: 10px 0;">
          <button id="prevPage" class="btn btn-sm btn-secondary" disabled>Previous</button>
          <span id="pageIndicator" style="color: var(--text-muted); font-size: 0.9rem;">Page 1</span>
          <button id="nextPage" class="btn btn-sm btn-secondary" disabled>Next</button>
        </div>

      </div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="js/reception.js"></script>
</body>

</html>